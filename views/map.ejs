<html lang="en">
    <head>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <title>RemoteHealth | Register</title>

        <!-- CSS -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- <link href="../public/materialize/materials_icons/css/material-icons.css" rel="stylesheet" /> -->

        <link href="../public/css/styles.css" rel="stylesheet" />
        <link rel="stylesheet"
            href="../public/materialize/css/materialize.min.css">
        <link rel="manifest" href="../public/manifest.json">

        <!-- brower icons -->
        <link rel="icon" type="image/gif"
            href="../public/img/icons/icon-72x72.png">
        <link rel="shortcut icon" href="../public/img/icons/icon-72x72.png">
        <!-- ios support -->
        <link rel="apple-touch-icon" href="../public/img/icons/icon-96x96.png">
        <meta name="apple-mobile-web-app-status-bar" content="#2e7d32">

        <meta name="theme-color" content="#2e7d32">

        <!--Import jQuery before materialize.js-->
        <!-- <script src="http://maps.googleapis.com/maps/api/js"></script> -->
        
        <script src="../public/js/jquery-3.4.1.min.js"></script>
        <script src="../public/materialize/js/materialize.min.js"></script>
    </head>



    <body class="grey darken-3">

        <!-- top nav -->
        <div class="navbar-fixed">
            <nav class="green darken-3" style="z-index: 999;">
                <div class="nav-wrapper container">
                    <a class="brand-logo center"><h5>Doctor's Panel</h5></a>
                    <a href="/respond" onclick="document.getElementById('loader-wrapper2').style.display = 'block';"><i class="left material-icons">add_alert</i><span
                            class="nav_badge new badge blue"><strong
                                id='data_count'></strong></span></a>
                    <a style="margin-top: 10px;" onclick="document.getElementById('loader-wrapper2').style.display = 'block';"
                     class="right btn waves-effect waves-light grey darken-3 btn white-text" href="/respond">back</a>
                </div>
            </nav>
        </div>




        <div class="row container">

            <h5 style="margin-bottom:20px;margin-top:30px;" class="col s10
                white-text">Locating: <span style="font-size: 0.8em;"><%= name
                        %>...</span>
                        <!-- <a href="/map" style="position: absolute;right: 10px;margin-top: -15px;" class="btn-floating btn-large waves-effect waves-light grey darken-2"><i class="material-icons">refresh</i></a> -->
                
                    </h5>
                    <p id="zoom_clicked" style="margin-bottom:10px;margin-top:0px;" class="col s10
                    white-text">Click red marker to zoom in</p>

                <div class="col s12" style="border:1px solid #ccc; margin-top:
                    0px;">
                    <div id='map' class="card-panel transparent"
                        style="border:1px solid #ccc;height:490px;">
                        <span class="white-text">Loading Map...</span>
                    </div>
                </div>

                <p id="lat" style="display:none"><%= lat %></p>
                    <p id="long" style="display:none"><%= long %></p>

        </div>

        <div id="loader-wrapper" class="loader-wrapper loader-wrapper-pre center grey darken-3">
            <div class="preloader-wrapper active">
              <div class="spinner-layer spinner-white-only">
                <div class="circle-clipper left">
                  <div class="circle"></div>
                </div><div class="gap-patch">
                  <div class="circle"></div>
                </div><div class="circle-clipper right">
                  <div class="circle"></div>
                </div>
              </div>
            </div>
          </div>

          <div id="loader-wrapper2" class="loader-wrapper center grey darken-3">
            <div class="preloader-wrapper active">
                <div class="spinner-layer spinner-white-only">
                  <div class="circle-clipper left">
                    <div class="circle"></div>
                  </div><div class="gap-patch">
                    <div class="circle"></div>
                  </div><div class="circle-clipper right">
                    <div class="circle"></div>
                  </div>
                </div>
            </div>
          </div>





          <script>
              var lat1 = Number(document.getElementById("lat").innerHTML);
                var long1 = Number(document.getElementById("long").innerHTML);
                function initMap() {
                  var myLatlng = {lat: lat1, lng: long1};
          
                  var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 4,
                    center: myLatlng
                  });
          
                  var marker = new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                    title: 'Click to zoom'
                  });
          
                  map.addListener('center_changed', function() {
                    // 3 seconds after the center of the map has changed, pan back to the
                    // marker.
                    window.setTimeout(function() {
                      map.panTo(marker.getPosition());
                    }, 3000);
                  });
          
                  marker.addListener('click', function() {
                    map.setZoom(8);
                    map.setCenter(marker.getPosition());
                    document.getElementById('zoom_clicked').style.display = "none";
                  });
                }
              </script>
                <script
                    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4bSJTKEB7naiqu0LSYp27SQmglUyZ-Jo&callback=initMap"
                    async defer></script>























                    <!-- The core Firebase JS SDK is always required and must be listed first -->
                    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-app.js"></script>
                    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-firestore.js"></script>

                    <script>
                    // Your web app's Firebase configuration
                    var firebaseConfig = {
                        apiKey: "AIzaSyCb5QTtOqAeW7jvKamFDHUWXHSuvxT5__A",
                        authDomain: "nyumba-246417.firebaseapp.com",
                        databaseURL: "https://nyumba-246417.firebaseio.com",
                        projectId: "nyumba-246417",
                        storageBucket: "nyumba-246417.appspot.com",
                        messagingSenderId: "581948417790",
                        appId: "1:581948417790:web:b844ec71ae0ebcae3b27af"
                    };
                    // Initialize Firebase
                    firebase.initializeApp(firebaseConfig);
                    const db = firebase.firestore();
                    </script>


                    <script src="../public/js/app.js"></script>
                    <script src="../public/js/ui.js"></script>
                    <script src="../public/js/db.js"></script>


                </body>
            </html>